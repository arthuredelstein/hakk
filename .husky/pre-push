echo "🧪 Running pre-push tests..."
echo "================================"

# Always run full linting to catch any issues
echo "🔍 Running linting on all files..."
npx semistandard

if [ $? -ne 0 ]; then
    echo "❌ Linting failed! Push aborted."
    echo "💡 Fix the linting errors and try again."
    echo "================================"
    exit 1
fi

# Run all tests (since tests might be affected by any change)
echo "🧪 Running all tests..."
npm test

if [ $? -eq 0 ]; then
    echo "✅ All tests passed! Proceeding with push..."
    echo "================================"
    exit 0
else
    echo "❌ Tests failed! Push aborted."
    echo "💡 Fix the failing tests and try again."
    echo "================================"
    exit 1
fi
